#include <stdio.h> /* entr  ́e es / sorties */
#include <unistd.h> /* primitives de base : fork , ...*/
#include <stdlib.h> /* exit */
# define MAX_PAUSES 10 /* nombre d ’ attentes maximum */
#include <string.h>   /* opérations sur les chaines */
#include <fcntl.h>    /* opérations sur les fichiers */
#define BUFSIZE 1024
int main (int argc,char *argv[])
{
 char *src =argv[1];
 char *buf=malloc(BUFSIZE);
 int is=open(src,O_WRONLY);
  if (is < 0) {
 printf("Erreur ouverture") ;
 exit(1) ;
     }
     for(int i=0;i<=10;i++){
pid_t fils=fork();
if (fils<0){
printf("Erreur du fork");
}
else if (fils==0){
strcpy(buf,"FILS\n");
dprintf(is,buf);
}
else {
strcpy(buf,"PERE\n");
dprintf(is,buf);
}

}
 close(is);
}
